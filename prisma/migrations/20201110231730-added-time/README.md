# Migration `20201110231730-added-time`

This migration has been generated by Wadhah mahrouk at 11/11/2020, 12:17:30 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "SchoolPeriod" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "hour" INTEGER NOT NULL,
    "minute" INTEGER NOT NULL
)

CREATE TABLE "SchoolTime" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "dayId" INTEGER NOT NULL,
    "startId" INTEGER NOT NULL,
    "endId" INTEGER NOT NULL,
    "group" INTEGER,
    "week" TEXT NOT NULL,

    FOREIGN KEY ("dayId") REFERENCES "WeekDay"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("startId") REFERENCES "SchoolPeriod"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("endId") REFERENCES "SchoolPeriod"("id") ON DELETE CASCADE ON UPDATE CASCADE
)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201110224400-7..20201110231730-added-time
--- datamodel.dml
+++ datamodel.dml
@@ -2,45 +2,64 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
-
 model Professor {
-  id    Int     @default(autoincrement()) @id
-  name  String  @unique
+  id   Int    @id @default(autoincrement())
+  name String @unique
 }
-
 model WeekDay {
-  id    Int     @default(autoincrement()) @id
-  name  String  @unique
+  id         Int          @id @default(autoincrement())
+  name       String       @unique
+  schoolTime SchoolTime[]
 }
-model Filiere{
-    id    Int   @default(autoincrement()) @id
-    abbreviation String
-    name String
-    levels FiliereWithLevel[]
+model Filiere {
+  id           Int                @id @default(autoincrement())
+  abbreviation String
+  name         String
+  levels       FiliereWithLevel[]
 }
 model FiliereWithLevel {
-      id    Int   @default(autoincrement()) @id
-      filiere Filiere @relation(fields: [filiereId], references: [id])
-      filiereId Int
-      level Int
-      subject Subject[]
+  id        Int       @id @default(autoincrement())
+  filiere   Filiere   @relation(fields: [filiereId], references: [id])
+  filiereId Int
+  level     Int
+  subject   Subject[]
 }
+model Subject {
+  id                 Int              @id @default(autoincrement())
+  name               String
+  filiereWithLevel   FiliereWithLevel @relation(fields: [filiereWithLevelId], references: [id])
+  filiereWithLevelId Int
+}
-model Subject {
-      id    Int   @default(autoincrement()) @id
-      name String 
-      filiereWithLevel FiliereWithLevel @relation(fields: [filiereWithLevelId], references: [id])
-      filiereWithLevelId Int
-}
+model SchoolPeriod {
+  id              Int          @id @default(autoincrement())
+  hour            Int
+  minute          Int
+  schoolTimeStart SchoolTime[] @relation("start")
+  schoolTimeEnd   SchoolTime[] @relation("end")
+}
+
+model SchoolTime {
+  id      Int          @id @default(autoincrement())
+  day     WeekDay      @relation(fields: [dayId], references: [id])
+  dayId   Int
+  start   SchoolPeriod @relation(fields: [startId], references: [id], name: "start")
+  startId Int
+
+  end   SchoolPeriod @relation(fields: [endId], references: [id], name: "end")
+  endId Int
+  group Int?
+  week  String
+}
```


